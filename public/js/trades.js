!function(){firebase.auth().onAuthStateChanged(function(e){e||(window.location="login.html")})}();var tradeRef=db.ref("trades"),tradeListRef=db.ref("tradesList");firebase.auth().onAuthStateChanged(function(e){if(e&&document.getElementById("tradeList")){new Vue({el:"#tradeList",data:{noedit:!0,rating:0,listings:!1},firebase:{trade:tradeRef,tradesListings:tradeListRef.child(firebase.auth().currentUser.uid),database:beerDatabaseRef},methods:{deleteBeerFromTrades:function(e){tradeRef.child(e.tradeID).remove(),tradeListRef.child(firebase.auth().currentUser.uid).child(e[".key"]).remove()},getURL:function(e){window.location="mailto:"+String(e)}}})}if(e&&document.getElementById("addTradeForm")){new Vue({el:"#addTradeForm",data:{errorMessage:"",image:"",user:"",tradeFor:"",tradeFrom:""},firebase:{trade:tradeRef,database:beerDatabaseRef},methods:{createTradeRequest:function(){var e={UID:firebase.auth().currentUser.uid,user:firebase.auth().currentUser.email,tradeFor:this.tradeFor,tradeFrom:this.tradeFrom},a=e.tradeFor.length&&e.tradeFrom.length&&e.UID.length&&e.user.length;a?(beerDatabaseRef.orderByChild("beerName").equalTo(e.tradeFor).on("child_added",function(a){e.image=a.child("image").val(),e.forBrewery=a.child("breweryName").val(),beerDatabaseRef.orderByChild("beerName").equalTo(e.tradeFrom).on("child_added",function(a){e.fromBrewery=a.child("breweryName").val(),tradeRef.push(e).then(function(a){e.tradeID=a.key,tradeListRef.child(firebase.auth().currentUser.uid).push(e),deactivateModal("addTradeModal"),this.errorMessage=""})})}),deactivateModal("addTradeModal")):this.errorMessage="Please fill out all fields."}}})}}),Vue.component("modal",{template:"#modal-template"});var activateModal=function(e){var a=document.getElementById(e);a.className+=" is-active"},deactivateModal=function(e){var a=document.getElementById(e);a.className=a.className.replace(" is-active","")};